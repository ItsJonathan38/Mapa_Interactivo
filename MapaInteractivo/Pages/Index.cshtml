@page
@model IndexModel
@{
    ViewData["Title"] = "Mapa Interactivo";
}

<div id="sidebar">
    <h2>Actores</h2>
    <button onclick="focusMarker(0)">👨‍🏫 Colegio INEM</button>
    <button onclick="focusMarker(1)">🏠 Carrera 15A</button>

    <h2>Potencialidades</h2>
    <button onclick="focusMarker(2)">🏠 Carrera 16</button>
    <button onclick="focusMarker(3)">🚦 Calle 8 con Carrera 17A</button>
    <button onclick="focusMarker(4)">🚦 Carrera 16 con Calle 12</button>

    <h2>Problemáticas</h2>
    <button onclick="focusMarker(5)">🚦 Calle 11 con Carrera 15A</button>
    <button onclick="focusMarker(6)">🚦 Carrera 17 con Calle 12</button>
    <button onclick="focusMarker(7)">🚦 Carrera 18 con Calle 11</button>
    <button onclick="focusMarker(8)">🚦 Colegio INEM</button>
</div>

<div id="map"></div>

@section Scripts {
    <script>
        // Crear mapa centrado
        var map = L.map('map').setView([5.526231, -73.370851], 16);

        // Capa base OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Lista de ubicaciones con info y fotos
        var locations = [
            { coords: [5.5259, -73.3723], title: "👨‍🏫 Colegio INEM", info: "Institución educativa del barrio Paraíso. Principal problematica del barrio dado a que se generan muchas peleas entre estudiantes", img: "https://upload.wikimedia.org/wikipedia/commons/4/47/School_building_icon.png" },
            { coords: [5.5257, -73.3711], title: "🏠 Carrera 15A", info: "Zona residencial importante.", img: "https://cdn-icons-png.flaticon.com/512/616/616408.png" },
            { coords: [5.5263, -73.3699], title: "🏠 Carrera 16", info: "Residencias con potencial de desarrollo.", img: "https://cdn-icons-png.flaticon.com/512/1670/1670615.png" },
            { coords: [5.5270, -73.3694], title: "🚦 Calle 8 con Carrera 17A", info: "Intersección de alto tráfico.", img: "https://cdn-icons-png.flaticon.com/512/2490/2490460.png" },
            { coords: [5.5282, -73.3702], title: "🚦 Carrera 16 con Calle 12", info: "Punto clave de movilidad.", img: "https://cdn-icons-png.flaticon.com/512/2490/2490460.png" },
            { coords: [5.5276, -73.3710], title: "🚦 Calle 11 con Carrera 15A", info: "Problemas por basuras mal administradas.", img: "https://cdn-icons-png.flaticon.com/512/1484/1484551.png" },
            { coords: [5.5281, -73.3690], title: "🚦 Carrera 17 con Calle 12", info: "Problemas de semaforización.", img: "https://cdn-icons-png.flaticon.com/512/1484/1484551.png" },
            { coords: [5.5269, -73.3685], title: "🚦 Carrera 18 con Calle 11", info: "Deficiencia en la infraestructura vial.", img: "https://cdn-icons-png.flaticon.com/512/1484/1484551.png" },
            { coords: [5.5262, -73.3690], title: "👨‍🏫 Colegio INEM", info: "Institución educativa del barrio Paraíso. Principal problematica del barrio dado a que se generan muchas peleas entre estudiantes", img: "https://upload.wikimedia.org/wikipedia/commons/4/47/School_building_icon.png" },
        ];

        // Crear marcadores con popup (emoji + info + foto)
        var markers = [];
        locations.forEach(loc => {
            var marker = L.marker(loc.coords).addTo(map);
            marker.bindPopup(`
                <b>${loc.title}</b><br>
                ${loc.info}<br>
                <img src="${loc.img}" class="popup-img" />
            `);
            markers.push(marker);
        });

        // Función para hacer zoom en marcador desde el sidebar
        function focusMarker(index) {
            var marker = markers[index];
            map.setView(marker.getLatLng(), 18); // zoom cercano
            marker.openPopup();
        }
    </script>
}


